<!DOCTYPE html>
<html>
<head>
<title>Query Demo</title>
</head>

<body>
  Query demo
</body>


<script type='text/javascript'>
  var source = new EventSource('http://localhost:8000/demo_query?txid=12');

  source.addEventListener("status", function(e) {
    console.log("status: ", e.data);
  });

  source.addEventListener("result", function(e) {
    console.log("result: ", e.data);
    source.close();
  });

  source.addEventListener('open', function(e) {
    console.log("open connection");
  }, false);

  source.addEventListener('error', function(e) {
    console.log("ERROR", e);
    if (e.readyState == EventSource.CLOSED) {
      console.log("connection closed");
    }
  }, false);

</script>
</html>
