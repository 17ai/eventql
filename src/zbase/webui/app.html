<!DOCTYPE html>
<html>
  <head>
    <title>ZenBase</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-type">

    <link rel="apple-touch-icon" sizes="57x57"   href="/assets/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60"   href="/assets/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72"   href="/assets/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76"   href="/assets/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/assets/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/assets/ms-icon-144x144.png">

    <style type="text/css">
     @font-face {
        font-family: 'FontAwesome';
        src: url('/assets/fontawesome-webfont.eot?v=4.3.0');
        src: url('/assets/fontawesome-webfont.eot?#iefix&v=4.3.0') format('embedded-opentype'), url('/assets/fontawesome-webfont.woff2?v=4.3.0') format('woff2'), url('/assets/fontawesome-webfont.woff?v=4.3.0') format('woff'), url('/assets/fontawesome-webfont.ttf?v=4.3.0') format('truetype'), url('/assets/fontawesome-webfont.svg?v=4.3.0#fontawesomeregular') format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" type="text/css" href="app.css" />
    <meta name="google" content="notranslate" />
  </head>
  <body>
    <script type="text/javascript">
      (new FontFace("FontAwesome", "url(/assets/fontawesome-webfont.woff2?v=4.3.0)")).load();
    </script>

    <nav class="zbase_header">
      <div class="navigation_inner">
        <a href="/a/" class="logo_app"><img src="/assets/favicon-32x32.png" height="22" alt="ZenBase"></a>
      </div>
    </nav>

    <div class="zbase_loader fullscreen">
      <div class="spinner_outer">
        <div class="spinner">
          <div class="rect1"></div>
          <div class="rect2"></div>
          <div class="rect3"></div>
          <div class="rect4"></div>
          <div class="rect5"></div>
        </div>
      </div>
    </div>

    <div class="zbase_wrap">
      <div class="zbase_viewport">
        hello world
      </div>
    </div>

  <script type="text/javascript">
    var ZBase = (function() {
      var modules_status = {};
      var modules_waitlist = [];

      var finishModuleDownload = function(module) {
        modules_status[module] = "loaded";
        // fire all finished callbacks
        for (var j = modules_waitlist.length - 1; j >= 0; j--) {
          var entry = modules_waitlist[j];
          for (var i = 0; i < entry.modules.length; i++) {
            if (modules_status[entry.modules[i]] != "loaded") {
              return;
            }
          }

          modules_waitlist.splice(j, 1);
          entry.on_loaded();
        }
      };

      var startModuleDownload = function(module) {
        modules_status[module] = "loading";
        console.log("Loading Module: ", module);

        window.setTimeout(function() {
          finishModuleDownload(module);
        }, 0);
      };

      var loadModules = function(modules, on_loaded) {
        var unloaded_modules = [];

        // search for missing modules
        modules.forEach(function(module) {
          if (modules_status[module] != "loaded") {
            unloaded_modules.push(module);
          }
        });

        // early exit if all modules are already loded
        if (unloaded_modules.length == 0) {
          on_loaded();
          return;
        }

        // add ourselves to the waitlist
        modules_waitlist.push({
          modules: modules,
          on_loaded: on_loaded
        });

        // start loading missing modules
        unloaded_modules.forEach(function(module) {
          if (modules_status[module] != "loading") {
            startModuleDownload(module);
          }
        });
      };


      return {
        loadModules: loadModules
      };
    })();
  </script>
  </body>
</html>

